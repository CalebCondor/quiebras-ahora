---
import { MapPin, Phone, Building2 } from "@lucide/astro";

const offices = [
  {
    city: "Área Metro",
    address: "Avenida San Patricio 785, San Juan, PR",
    query: "Avenida San Patricio 785, San Juan, PR",
    phones: [
      "1-800-981-7133",
      "(787) 781-5635",
      "(787) 273-7143",
      "(787) 783-6615",
    ],
  },
  {
    city: "Bayamón",
    address: "Urb. Riverview, Calle 25 DD16, Bayamón, PR",
    query: "Calle 25, Bayamón, Puerto Rico",
    phones: ["(787) 787-4747", "(787) 787-4775", "1-800-664-0088"],
  },
  {
    city: "Caguas",
    address: "Urb. Santa Juana, calle 19 # R8, Caguas, PR",
    query: "Urb. Santa Juana, calle 19 # R8, Caguas, PR",
    phones: ["(787) 746-5266", "(787) 746-5288", "1-800-501-0088"],
  },
];
---

<section id="oficinas" class="py-24 px-8 bg-gray-50/50 overflow-hidden">
  <div class="max-w-[1400px] mx-auto">
    <!-- Section Header -->
    <div class="text-center mb-20">
      <div
        class="inline-block px-4 py-1.5 mb-6 text-[11px] font-bold tracking-[0.25em] text-primary uppercase bg-primary/5 rounded-full"
      >
        Nuestras Sedes
      </div>
      <h2
        class="text-4xl md:text-6xl font-['Playfair_Display'] text-gray-900 leading-[1.15] mb-6"
      >
        Visite nuestras <span class="text-primary italic font-serif"
          >oficinas</span
        >
      </h2>
      <p class="text-gray-600 text-lg max-w-2xl mx-auto leading-relaxed">
        Estamos estratégicamente ubicados para brindarle el mejor servicio legal
        en los principales puntos de la isla.
      </p>
    </div>

    <!-- Offices Grid -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12">
      {
        offices.map((office) => (
          <div class="group relative bg-white p-10 lg:p-12 shadow-[0_20px_50px_rgba(0,0,0,0.04)] hover:shadow-[0_20px_60px_rgba(204,0,0,0.08)] transition-all duration-500 border border-transparent hover:border-primary/10 flex flex-col h-full overflow-hidden">
            {/* Decorative background element */}
            <div class="absolute -right-8 -top-8 w-40 h-40 bg-primary/5 rounded-full transition-transform duration-700 group-hover:scale-150 z-0" />

            <div class="relative z-10 flex flex-col flex-1">
              {/* Icon */}
              <div class="w-14 h-14 bg-primary/5 rounded-2xl flex items-center justify-center text-primary mb-8 group-hover:bg-primary group-hover:text-white transition-all duration-500">
                <Building2 class="w-7 h-7" />
              </div>

              {/* Title */}
              <h3 class="text-2xl lg:text-3xl font-['Playfair_Display'] font-bold text-gray-900 mb-6 group-hover:text-primary transition-colors min-h-[1.5em] flex items-center">
                {office.city}
              </h3>

              {/* Address Section - Fixed height to ensure alignment */}
              <div class="flex items-start gap-4 mb-2 min-h-12">
                <MapPin class="w-5 h-5 text-primary shrink-0 mt-1" />
                <p class="text-gray-600 leading-relaxed font-medium text-sm">
                  {office.address}
                </p>
              </div>

              {/* Phone Numbers Section - Grows to push map down or has fixed min-height */}
              <div class="mb-10 flex-1">
                <p class="text-[10px] uppercase tracking-[0.2em] font-bold text-gray-400 mb-5">
                  Líneas de Atención
                </p>
                <div class="space-y-4">
                  {office.phones.map((phone) => (
                    <a
                      href={`tel:${phone.replace(/\D/g, "")}`}
                      class="flex items-center gap-3 text-gray-700 hover:text-primary transition-colors group/phone"
                    >
                      <div class="p-2 rounded-full bg-gray-50 group-hover/phone:bg-primary/10 transition-colors">
                        <Phone class="w-3.5 h-3.5 text-primary" />
                      </div>
                      <span class="font-bold text-sm whitespace-nowrap font-['Montserrat']">
                        {phone}
                      </span>
                    </a>
                  ))}
                  {/* Spacer for cards with fewer phones to maintain height */}
                  {office.phones.length < 4 && (
                    <div
                      class="hidden md:block"
                      style={`height: ${(4 - office.phones.length) * 44}px`}
                    />
                  )}
                </div>
              </div>

              {/* Google Map Embed - Pushed to absolute bottom of the content area */}
              <div class="w-full h-48 overflow-hidden rounded-none shadow-inner ring-1 ring-gray-100 group-hover:ring-primary/20 transition-all duration-500 mt-auto">
                <iframe
                  width="100%"
                  height="100%"
                  style="border:0"
                  loading="lazy"
                  src={`https://maps.google.com/maps?q=${encodeURIComponent(
                    office.query,
                  )}&t=&z=15&ie=UTF8&iwloc=&output=embed`}
                  class="grayscale group-hover:grayscale-0 opacity-80 group-hover:opacity-100 transition-all duration-700"
                />
              </div>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>
